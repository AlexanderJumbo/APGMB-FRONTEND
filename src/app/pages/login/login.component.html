<!-- login.component.html -->
<div
  class="relative min-h-screen bg-cover bg-center flex items-center justify-center"
  style="background-image: url('bg-water.jpg')"
>
  <!-- Overlay oscuro semitransparente -->
  <div class="absolute inset-0 bg-black/60"></div>

  <!-- Contenedor del formulario -->
  <div
    class="relative z-10 bg-white bg-opacity-95 rounded-xl shadow-2xl p-10 max-w-md w-full animate-fadeIn"
  >
    <!-- Logo -->
    <div class="flex justify-center mb-8">
      <img
        src="logo-municipio-balao.png"
        alt="Logo Municipio Balao"
        class="h-30 object-contain"
      />
    </div>

    <h2 class="text-3xl font-extrabold text-center text-gray-900 mb-10">
      Iniciar sesión
    </h2>

    <form [formGroup]="formLogin" (ngSubmit)="authenticate()" class="space-y-6">
      <!-- Usuario -->
      <div>
        <label
          for="username"
          class="block text-sm font-semibold text-gray-700 mb-1"
          >Usuario</label
        >
        <div class="relative">
          <input
            id="username"
            type="text"
            autocomplete="username"
            aria-required="true"
            required
            (blur)="formLogin.get('username')?.markAsTouched()"
            class="w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition pr-10"
            formControlName="username"
            [ngClass]="{ 'border-red-500': hasErrors('username', 'required') }"
          />
          <!-- Ícono usuario -->
          <svg
            class="w-5 h-5 text-gray-400 absolute right-3 top-3 pointer-events-none"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            viewBox="0 0 24 24"
          >
            <path d="M16 21v-2a4 4 0 00-8 0v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        <p
          *ngIf="hasErrors('username', 'required')"
          class="text-red-600 text-sm mt-1"
        >
          Este campo es requerido
        </p>
      </div>

      <!-- Contraseña -->
      <div>
        <label
          for="password"
          class="block text-sm font-semibold text-gray-700 mb-1"
          >Contraseña</label
        >
        <div class="relative">
          <input
            id="password"
            type="password"
            autocomplete="current-password"
            aria-required="true"
            required
            (blur)="formLogin.get('password')?.markAsTouched()"
            class="w-full px-4 py-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition pr-10"
            formControlName="password"
            [ngClass]="{ 'border-red-500': hasErrors('password', 'required') }"
          />
          <!-- Ícono candado -->
          <svg
            class="w-5 h-5 text-gray-400 absolute right-3 top-3 pointer-events-none"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            viewBox="0 0 24 24"
          >
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0110 0v4"></path>
          </svg>
        </div>
        <p
          *ngIf="hasErrors('password', 'required')"
          class="text-red-600 text-sm mt-1"
        >
          Este campo es requerido
        </p>
      </div>

      <!-- Botón -->
      <button
        type="submit"
        [disabled]="formLogin.invalid || loading()"
        class="w-full py-3 rounded-md bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed relative"
      >
        <span *ngIf="!loading()">Iniciar sesión</span>
        <span *ngIf="loading()" class="animate-pulse">Cargando...</span>
      </button>
    </form>
  </div>
</div>
